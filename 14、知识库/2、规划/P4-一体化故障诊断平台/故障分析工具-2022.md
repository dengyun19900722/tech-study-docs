# 1 资料收集

| 资料名称                       | 资料地址                                                     | 备注 |
| ------------------------------ | ------------------------------------------------------------ | ---- |
| 行业 SaaS 微服务稳定性保障实战 | https://www.toutiao.com/article/7127564287693832741/?log_from=06ed0810da8ba_1660096289488 |      |
|                                |                                                              |      |
|                                |                                                              |      |

## 1.1 行业 SaaS 微服务稳定性保障实战  

### 1.1.1 背景

​		很多研发人员在日常工作中经常回遇到以下两个问题：竟然不可以运行，为什么？竟然可以运行，为什么？

​		因此，他们非常期望**可观测能够提供解决问题的思路**。

​		2020 年后，可观测的搜索趋势出现井喷，很大一部分原因是 SRE 站点可靠性工程逐步普及，国内大厂纷纷设立相关岗位和对应招聘指标，使得可观测性在国内也得到了较多关注。这也意味着越来越多的基础服务面临了稳定性挑战，而破解稳定性挑战的重要手段就在于提供可观测性。

### 1.1.2 基础概念

​		**可观测性**：在软件产品和服务领域，监控能够告知我们服务究竟是否能正常运行，而可观测性可以告诉我们为为什么服务没有正常运行。

​		**目标：**怎么样才能尽可能降低线上排查故障的难度？

### 1.1.3 可观测演进

#### 1.1.3.1 传统监控+微应用日志收集

- **ELKStack 获取日志和查询 ElastAlert 完成日志告警**

![0c754c46c9624bc0847b4ac83d3cec6d_noop (1)](故障分析工具-2022.assets/0c754c46c9624bc0847b4ac83d3cec6d_noop (1).png)

#### 1.1.3.2 架构升级+可观测性引入

- **Grafana 看板+Zorka 支持 jvm 监控**

​		随着业务发展，系统对日志的要求也逐步增加，比如团队非常多，需要配置各种各样的告警规则，因此我们引入了 Grafana 逐步替代 kibana 和 Zabbix 的查询功能。可以通过 Grafana 的 ES 插件查询对日志进行告警，然后通过 alert 功能完成原先 ElastAlert 的排除，同时可以使用 Grafana 做出更直观的可视化大屏进行展示。

​		除了日志外，我们也期望收集到 Java 应用指标，因此又引入了 Zorka 开源组件。Zorka 和 Zabbix 可以简单地进行结合，可以通过 Zorka 将收集到的信息上报给 Zabbix 进行展示。而 Zabbix 又可以通过 Grafana Zabbix 插件直接输出数据，最终将整个应用大屏和看板信息都收集到 Grafana 界面。

#### 1.1.3.3 云原生改造

- **K8s 的编排能力和微服务相辅相成迫切需要 trace 组件的支持**

  

- **JmxExporter 快速支持云原生 Java 组件的 jvm 信息展示**

  

- **利用配置中心完成应用到 owner 的精准告警**

- **ARMS：无侵入支持 Trace**



#### 1.1.3.4 可观测升级

- **Log Trace Metrics 理念升级**
- **简版根因分析上线**
- **ARMS 支持 traceId 透出 responseHeader**
- **ARMS 支持运维告警平台**
- **Java 生态免修改注入 agent 方式-JAVA_TOOL_OPTIONS**
- **Prometheus Exporter**
- **成本观测**

### 1.1.4 未来畅想

#### 1.1.4.1 基于 eBPF 的 Kuberneters 一站式可观测性

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/41a730747b9641b6bd3b53e5a9e85a23~noop.image?_iz=58558&from=article.pc_detail&x-expires=1660701089&x-signature=d3zJU9%2FNSDuKdYXDUzBEGu1XqhU%3D)

#### 1.4.1.2 Chaos-engineering

# 2 产品定位

- 可观测
- 能够提供解决问题的思路

